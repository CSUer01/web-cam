<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>ç›‘æ§åå° - ç¨³å®šç‰ˆ</title>
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <style>
        body { background: #000; color: #00ff00; font-family: monospace; text-align: center; padding: 20px; }
        #video-container { width: 90%; max-width: 800px; margin: 20px auto; border: 2px solid #222; background: #050505; min-height: 400px; display: flex; align-items: center; justify-content: center; position: relative; cursor: pointer; }
        video { width: 100%; height: auto; display: block; }
        .controls { margin: 20px; }
        button { background: #00ff00; border: none; padding: 15px 35px; font-weight: bold; cursor: pointer; font-size: 1rem; border-radius: 5px; }
        #status-info { color: #ffcc00; margin: 10px; font-size: 0.9rem; }
    </style>
</head>
<body>
    <h2>LIVE STREAMING</h2>
    <div id="status-info">ç³»ç»Ÿå°±ç»ª</div>

    <div id="video-container" onclick="forcePlay()">
        <video id="remoteVideo" autoplay playsinline muted></video>
        <p id="tip" style="position: absolute; color: #444;">[ æš‚æ— ä¿¡å· ]</p>
    </div>

    <div class="controls">
        <button onclick="connect()">ğŸ“¡ è¿æ¥è¿œç¨‹æ‰‹æœº</button>
    </div>

    <script>
        const targetID = 'my_secret_cam_9988';
        // å›½å†…ä¼˜åŒ–ç‰ˆ Peer é…ç½®
        const peer = new Peer({
            config: { 'iceServers': [
                { urls: 'stun:stun.anyfirewall.com:3478' },
                { urls: 'stun:stun.stunprotocol.org:3478' },
                { urls: 'stun:stun.l.google.com:19302' }
            ]}
        });

        const video = document.getElementById('remoteVideo');

        function connect() {
            document.getElementById('status-info').innerText = "å‘¼å«ä¸­...";
            const canvas = document.createElement('canvas');
            const stream = canvas.captureStream();
            const call = peer.call(targetID, stream);

            call.on('stream', (remoteStream) => {
                document.getElementById('status-info').innerText = "ğŸŸ¢ ä¿¡å·å·²æ¥é€š";
                document.getElementById('tip').style.display = 'none';
                video.srcObject = remoteStream;
                video.play().catch(() => {
                    document.getElementById('status-info').innerText = "ğŸŸ¡ è¯·ç‚¹å‡»ä¸‹æ–¹é»‘æ¡†æ¿€æ´»ç”»é¢";
                });
            });
        }

        function forcePlay() {
            if(video.srcObject) {
                video.play();
                document.getElementById('status-info').innerText = "ğŸŸ¢ ç”»é¢å·²æ¿€æ´»";
            }
        }
    </script>
</body>
</html>
